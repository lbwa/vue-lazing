/*!
  * vue-lazing v0.2.0
  * (c) 2018 Bowen<Github: lbwa>
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueLazing=t()}(this,function(){"use strict";var e={name:"vue-lazing",data:()=>({observer:{}}),render(e){return e("div",{class:{lazing__wrapper:!0},ref:"box"},this.$slots.default)},props:{root:{type:Object,default:null},rootMargin:{type:String,default:"0px"},threshold:{type:Number,default:.1}},data:()=>({imgBox:[]}),mounted(){this.imgBox=[...this.$refs.box.querySelectorAll("img")],this.buildObserver(),this.iterator()},beforeDestroy(){this.disableObserver()},methods:{buildObserver(){this.observer=new IntersectionObserver(this.replaceRunner,{root:this.root,rootMargin:this.rootMargin,threshold:this.threshold})},iterator(){this.imgBox.forEach(e=>{this.observer.observe(e)})},replaceRunner(e){e.forEach(e=>{if(!e.isIntersecting)return;const t=e.target;t.src=t.getAttribute("data-src")})},disableObserver(){this.observer.disconnect()}},install:function(t){t.component("vue-lazing",e)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});
